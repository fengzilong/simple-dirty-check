!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.SDC=e()}(this,function(){"use strict";function t(t){return t&&"object"==typeof t&&"default"in t?t.default:t}function e(t,e){return e={exports:{}},t(e,e.exports),e.exports}var r=e(function(t){var e=function(){function t(e,r,n,o){function u(e,n){if(null===e)return null;if(0==n)return e;var i,l;if("object"!=typeof e)return e;if(t.__isArray(e))i=[];else if(t.__isRegExp(e))i=new RegExp(e.source,f(e)),e.lastIndex&&(i.lastIndex=e.lastIndex);else if(t.__isDate(e))i=new Date(e.getTime());else{if(a&&Buffer.isBuffer(e))return i=new Buffer(e.length),e.copy(i),i;"undefined"==typeof o?(l=Object.getPrototypeOf(e),i=Object.create(l)):(i=Object.create(o),l=o)}if(r){var s=c.indexOf(e);if(s!=-1)return p[s];c.push(e),p.push(i)}for(var y in e){var h;l&&(h=Object.getOwnPropertyDescriptor(l,y)),h&&null==h.set||(i[y]=u(e[y],n-1))}return i}var i;"object"==typeof r&&(n=r.depth,o=r.prototype,i=r.filter,r=r.circular);var c=[],p=[],a="undefined"!=typeof Buffer;return"undefined"==typeof r&&(r=!0),"undefined"==typeof n&&(n=1/0),u(e,n)}function e(t){return Object.prototype.toString.call(t)}function r(t){return"object"==typeof t&&"[object Date]"===e(t)}function n(t){return"object"==typeof t&&"[object Array]"===e(t)}function o(t){return"object"==typeof t&&"[object RegExp]"===e(t)}function f(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}return t.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},t.__objToStr=e,t.__isDate=r,t.__isArray=n,t.__isRegExp=o,t.__getRegExpFlags=f,t}();"object"==typeof t&&t.exports&&(t.exports=e)}),n=t(r),o=e(function(t,e){function r(t){var e=[];for(var r in t)e.push(r);return e}e=t.exports="function"==typeof Object.keys?Object.keys:r,e.shim=r}),f=t(o),u=o.shim,i=Object.freeze({default:f,shim:u}),c=e(function(t,e){function r(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function n(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var o="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();e=t.exports=o?r:n,e.supported=r,e.unsupported=n}),p=t(c),a=c.unsupported,l=c.supported,s=Object.freeze({default:p,unsupported:a,supported:l}),y=e(function(e){function r(t){return null===t||void 0===t}function n(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length)&&("function"==typeof t.copy&&"function"==typeof t.slice&&!(t.length>0&&"number"!=typeof t[0]))}function o(t,e,o){var i,a;if(r(t)||r(e))return!1;if(t.prototype!==e.prototype)return!1;if(c(t))return!!c(e)&&(t=f.call(t),e=f.call(e),p(t,e,o));if(n(t)){if(!n(e))return!1;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0}try{var l=u(t),s=u(e)}catch(t){return!1}if(l.length!=s.length)return!1;for(l.sort(),s.sort(),i=l.length-1;i>=0;i--)if(l[i]!=s[i])return!1;for(i=l.length-1;i>=0;i--)if(a=l[i],!p(t[a],e[a],o))return!1;return typeof t==typeof e}var f=Array.prototype.slice,u=t(i),c=t(s),p=e.exports=function(t,e,r){return r||(r={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?r.strict?t===e:t==e:o(t,e,r))}}),h=t(y),g=e(function(t){t.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}}),d=t(g),b=Object.freeze({default:d}),v=e(function(e){function r(t){for(var e=t.split("."),r=[],n=0;n<e.length;n++){for(var o=e[n];"\\"===o[o.length-1]&&void 0!==e[n+1];)o=o.slice(0,-1)+".",o+=e[++n];r.push(o)}return r}var n=t(b);e.exports.get=function(t,e,o){if(!n(t)||"string"!=typeof e)return t;for(var f=r(e),u=0;u<f.length;u++){if(!Object.prototype.propertyIsEnumerable.call(t,f[u]))return o;if(t=t[f[u]],void 0===t||null===t){if(u!==f.length-1)return o;break}}return t},e.exports.set=function(t,e,o){if(n(t)&&"string"==typeof e)for(var f=r(e),u=0;u<f.length;u++){var i=f[u];n(t[i])||(t[i]={}),u===f.length-1&&(t[i]=o),t=t[i]}},e.exports.delete=function(t,e){if(n(t)&&"string"==typeof e)for(var o=r(e),f=0;f<o.length;f++){var u=o[f];if(f===o.length-1)return void delete t[u];if(t=t[u],!n(t))return}},e.exports.has=function(t,e){if(!n(t)||"string"!=typeof e)return!1;for(var o=r(e),f=0;f<o.length;f++){if(!n(t))return!1;if(!(o[f]in t))return!1;t=t[o[f]]}return!0}});t(v);var j=v.get,x=20,O=function(t){this.data=t,this._watchers={}};return O.create=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(this,[null].concat(t)))},O.prototype.get=function(t){return j(this.data,t)},O.prototype.compute=function(t,e,r,n){var o=this;this.data[t]=r();for(var f=0,u=e.length;f<u;f++){var i=e[f];o.watch(i,function(){o.data[t]=r()},n)}},O.prototype.unwatch=function(){},O.prototype.watch=function(t,e,r){var o=this._watchers;o[t]=o[t]||[];var f;f=r?n(this.get(t)):this.get(t),o[t].push({keypath:t,last:f,deep:!!r,watcher:e})},O.prototype.digest=function(){var t,e=this,r=x,o=function(){console.debug("> digestOne"),t=!1;var f=e._watchers;for(var u in f)for(var i=f[u],c=0,p=i.length;c<p;c++){var a=i[c],l=e.get(a.keypath),s=a.last,y=!0;y=a.deep?h(l,s):l===s,y||(a.last=a.deep?n(l):l,a.watcher(l,s),t=!0)}if(r--,r<0)throw new Error("数据震荡");t&&o()};o()},O});